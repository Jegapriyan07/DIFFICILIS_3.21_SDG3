<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Respiratory Health Risk Platform | SDG-3</title>
    <meta name="description" content="Real-time respiratory health risk monitoring platform aligned with UN SDG-3">

    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />

    <!-- Google Fonts -->
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Poppins:wght@600;700&display=swap"
        rel="stylesheet">

    <link rel="stylesheet" href="styles.css">
</head>

<body>
    <div id="app">
        <!-- Login Page -->
        <div id="login-page" class="page active">
            <div class="login-container">
                <div class="login-card">
                    <!-- Header Section -->
                    <div class="login-header">
                        <h1 class="app-title">HEALTH PULSE AQI</h1>
                        <p class="app-subtitle">SDG-3: Good Health & Well-Being</p>
                    </div>

                    <!-- Role Selection Section -->
                    <div class="role-selection-section">
                        <h2 class="role-selection-title">Select Your Role</h2>
                        
                        <div class="roles-grid">
                            <!-- Health Officer Role -->
                            <div class="role-option" data-role="health_officer" onclick="selectRole('health_officer')">
                                <div class="role-option-icon">‚≠ê</div>
                                <h3 class="role-option-title">Health Officer</h3>
                                <p class="role-option-description">Medical decision support</p>
                                <div class="role-option-indicator"></div>
                            </div>

                            <!-- Urban Planner Role -->
                            <div class="role-option" data-role="urban_planner" onclick="selectRole('urban_planner')">
                                <div class="role-option-icon">üèõÔ∏è</div>
                                <h3 class="role-option-title">Urban Planner</h3>
                                <p class="role-option-description">Infrastructure insights</p>
                                <div class="role-option-indicator"></div>
                            </div>

                            <!-- Citizen Role -->
                            <div class="role-option" data-role="beneficiary" onclick="selectRole('beneficiary')">
                                <div class="role-option-icon">üë§</div>
                                <h3 class="role-option-title">Citizen</h3>
                                <p class="role-option-description">Personal health guidance</p>
                                <div class="role-option-indicator"></div>
                            </div>
                        </div>
                    </div>

                    <!-- CTA Button -->
                    <button id="login-button" class="cta-button" onclick="handleLogin()" disabled>
                        <span class="cta-button-text">Continue as Selected Role</span>
                        <span class="cta-button-arrow">‚Üí</span>
                    </button>

                    <!-- Role Confirmation Display -->
                    <div id="role-confirmation" class="role-confirmation"></div>

                    <!-- Error Message -->
                    <div id="login-error" class="error-message"></div>
                </div>

                <!-- Language Toggle -->
                <button id="lang-toggle-login" class="language-toggle">
                    <span class="lang-icon">üåê</span>
                    <span class="lang-code" id="lang-text-login">EN</span>
                </button>
            </div>
        </div>

        <!-- Loading Screen -->
        <div id="loading-page" class="page">
            <div class="loading-container">
                <!-- Enhanced Loading Animation -->
                <div class="enhanced-loader">
                    <div class="loader-outer-ring"></div>
                    <div class="loader-middle-ring"></div>
                    <div class="loader-inner-ring"></div>
                    <div class="loader-center">
                        <div class="pulse-dot"></div>
                    </div>
                </div>
                
                <h2 id="loading-text" class="loading-text">Analyzing respiratory risk data...</h2>
                
                <!-- Animated progress bar -->
                <div class="enhanced-progress">
                    <div class="progress-bar-container">
                        <div class="progress-fill"></div>
                    </div>
                    <div class="progress-dots">
                        <span class="dot"></span>
                        <span class="dot"></span>
                        <span class="dot"></span>
                        <span class="dot"></span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Health Officer Dashboard -->
        <div id="health-officer-dashboard" class="page dashboard">
            <header class="dashboard-header">
                <div class="header-left">
                    <h1 id="ho-dashboard-title">Health Officer Dashboard</h1>
                </div>
                <div class="header-right">
                    <button id="lang-toggle-ho" class="lang-toggle">
                        <span class="lang-icon">üåê</span>
                        <span id="lang-text-ho">EN</span>
                    </button>
                    <button id="logout-ho" class="btn-secondary">
                        <span id="logout-text-ho">Logout</span>
                    </button>
                </div>
            </header>

            <div class="dashboard-content">
                <div class="dashboard-grid">
                    <!-- Left Column -->
                    <div class="left-column">
                        <!-- Heatmap Section -->
                        <div class="card card-heatmap">
                            <div class="card-header">
                                <h3 id="ho-heatmap-title">Respiratory Severity Heatmap</h3>
                                <div class="update-time" id="ho-update-time">Updated: --</div>
                            </div>
                            <div id="ho-map" class="map-container"></div>
                            <div class="map-legend">
                                <div class="legend-item">
                                    <span class="legend-color" style="background: #00E676;"></span>
                                    <span id="legend-low">Low (0-50)</span>
                                </div>
                                <div class="legend-item">
                                    <span class="legend-color" style="background: #FFD54F;"></span>
                                    <span id="legend-mild">Mild (51-100)</span>
                                </div>
                                <div class="legend-item">
                                    <span class="legend-color" style="background: #FF6B35;"></span>
                                    <span id="legend-high">High (101-200)</span>
                                </div>
                                <div class="legend-item">
                                    <span class="legend-color" style="background: #E53935;"></span>
                                    <span id="legend-severe">Severe (201+)</span>
                                </div>
                            </div>
                        </div>

                        <!-- Recommended Actions Section -->
                        <div class="card recommended-actions-card">
                            <div class="card-header">
                                <h3 id="ho-recommended-actions-title">üìã RECOMMENDED ACTIONS</h3>
                            </div>
                            <div class="actions-container">
                                <!-- Immediate Actions -->
                                <div class="action-group">
                                    <div class="action-header action-immediate">
                                        <span class="action-icon">‚è±Ô∏è</span>
                                        <span class="action-period" id="action-immediate-title">Immediate Actions (0-6 Hours)</span>
                                    </div>
                                    <div class="action-list">
                                        <div class="action-item">
                                            <span class="action-number">1</span>
                                            <span class="action-text" id="action-imm-1">Issue public advisories via SMS, radio, and local media</span>
                                        </div>
                                        <div class="action-item">
                                            <span class="action-number">2</span>
                                            <span class="action-text" id="action-imm-2">Advise elderly, children, and asthma patients to <strong>stay indoors</strong></span>
                                        </div>
                                        <div class="action-item">
                                            <span class="action-number">3</span>
                                            <span class="action-text" id="action-imm-3">Ensure availability of <strong>nebulizers</strong> and <strong>inhalers</strong> at PHCs</span>
                                        </div>
                                    </div>
                                </div>

                                <!-- Short-Term Actions -->
                                <div class="action-group">
                                    <div class="action-header action-short-term">
                                        <span class="action-icon">‚è±Ô∏è</span>
                                        <span class="action-period" id="action-short-title">Short-Term Actions (6-24 Hours)</span>
                                    </div>
                                    <div class="action-list">
                                        <div class="action-item">
                                            <span class="action-number">1</span>
                                            <span class="action-text" id="action-short-1">Deploy <strong>mobile health</strong> camps in high-risk zones</span>
                                        </div>
                                        <div class="action-item">
                                            <span class="action-number">2</span>
                                            <span class="action-text" id="action-short-2">Coordinate with municipal bodies for dust and traffic control</span>
                                        </div>
                                        <div class="action-item">
                                            <span class="action-number">3</span>
                                            <span class="action-text" id="action-short-3">Increase respiratory OPD <strong>staffing</strong> during peak hours</span>
                                        </div>
                                    </div>
                                </div>

                                <!-- Preventive Actions -->
                                <div class="action-group">
                                    <div class="action-header action-preventive">
                                        <span class="action-icon">‚è±Ô∏è</span>
                                        <span class="action-period" id="action-prevent-title">Preventive Actions (24-72 Hours)</span>
                                    </div>
                                    <div class="action-list">
                                        <div class="action-item">
                                            <span class="action-number">1</span>
                                            <span class="action-text" id="action-prevent-1">Review ward-level pollution trends</span>
                                        </div>
                                        <div class="action-item">
                                            <span class="action-number">2</span>
                                            <span class="action-text" id="action-prevent-2">Prepare contingency plans for hospital capacity surge</span>
                                        </div>
                                        <div class="action-item">
                                            <span class="action-number">3</span>
                                            <span class="action-text">Engage community health workers for surveillance</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Right Column -->
                    <div class="right-column">
                        <!-- Medical Severity Classification -->
                        <div class="card">
                            <div class="card-header">
                                <h3 id="ho-severity-title">Medical Severity Classification</h3>
                            </div>
                            <div class="severity-summary" id="ho-severity-summary">
                                <div class="severity-main" id="ho-severity-main">
                                    <div class="severity-badge severe" id="ho-severity-badge">SEVERE</div>
                                    <div class="prediction-confidence" id="ho-prediction-confidence">Prediction confidence: --</div>
                                    <p id="ho-zones-affected">-- zones affected</p>
                                </div>
                                <div class="severity-breakdown" id="ho-severity-breakdown">
                                    <!-- Populated by JS -->
                                </div>
                            </div>
                        </div>

                        <!-- Population at Risk -->
                        <div class="card">
                            <div class="card-header">
                                <h3 id="ho-population-title">Population at Risk</h3>
                            </div>
                            <div class="population-stats" id="ho-population-stats">
                                <!-- Populated by JS -->
                            </div>
                        </div>

                        <!-- Primary Action Box with Alert Button -->
                        <div class="card primary-action-card">
                            <div class="card-header">
                                <h3 id="ho-primary-action-title">TODAY'S PRIMARY ACTION</h3>
                            </div>
                            <div class="primary-action-content" id="ho-primary-action" style="padding: 16px; font-size: 14px; line-height: 1.6; color: #1E293B;">
                                üö® Issue health advisories via SMS, radio, and local media to all beneficiaries in high-risk zones
                            </div>
                            <div class="card-actions">
                                <button class="btn-primary btn-send-alert" id="ho-send-alert">
                                    <span id="ho-send-text">Send Notification</span>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Urban Planner Dashboard -->
        <div id="urban-planner-dashboard" class="page dashboard">
            <header class="dashboard-header">
                <div class="header-left">
                    <h1 id="up-dashboard-title">Urban Planner Dashboard</h1>
                </div>
                <div class="header-right">
                    <button id="lang-toggle-up" class="lang-toggle">
                        <span class="lang-icon">üåê</span>
                        <span id="lang-text-up">EN</span>
                    </button>
                    <button id="logout-up" class="btn-secondary">
                        <span id="logout-text-up">Logout</span>
                    </button>
                </div>
            </header>

            <div class="dashboard-content">
                <div class="dashboard-grid-urban">
                    <!-- Heatmap Section -->
                    <div class="card card-heatmap">
                        <div class="card-header">
                            <h3 id="up-heatmap-title">Respiratory Severity Heatmap</h3>
                            <div class="update-time" id="up-update-time">Updated: --</div>
                        </div>
                        <div id="up-map" class="map-container"></div>
                        <div class="map-legend">
                            <div class="legend-item">
                                <span class="legend-color" style="background: #00E676;"></span>
                                <span id="up-legend-good">Good (0-50)</span>
                            </div>
                            <div class="legend-item">
                                <span class="legend-color" style="background: #FFD54F;"></span>
                                <span id="up-legend-moderate">Moderate (51-100)</span>
                            </div>
                            <div class="legend-item">
                                <span class="legend-color" style="background: #FF6B35;"></span>
                                <span id="up-legend-high">High (101-200)</span>
                            </div>
                            <div class="legend-item">
                                <span class="legend-color" style="background: #E53935;"></span>
                                <span id="up-legend-severe">Severe (201+)</span>
                            </div>
                        </div>
                    </div>

                    <!-- Zone-Based Risk Patterns -->
                    <div class="card zones-card">
                        <div class="card-header">
                            <h3 id="up-zones-title">üö® High-Risk Zones (AQI > 100)</h3>
                        </div>
                        <div class="zone-list" id="up-zone-list">
                            <!-- Populated by JS -->
                        </div>
                    </div>

                    <!-- Infrastructure Intervention Simulator -->
                    <div class="card infrastructure-card">
                        <div class="card-header">
                            <h3 id="up-infrastructure-title">üèóÔ∏è Infrastructure Intervention Simulator</h3>
                        </div>
                        <div class="simulator-content" id="up-simulator">
                            <div class="simulator-note" id="up-planning-note">Planning Scenario (Not Real-Time)</div>
                            <div class="simulator-info">
                                <div class="simulator-assumptions" id="up-assumptions">Assumptions: model is rule-based and uses historical studies.</div>
                                <div class="policy-relevance" id="up-policy-relevance">Policy Relevance: Suggested for green zoning, traffic planning, and industrial controls.</div>
                            </div>
                            <div class="simulator-controls">
                                <div class="control-group">
                                    <label for="select-intervention" class="control-label">Select Intervention:</label>
                                    <select id="select-intervention">
                                        <option>Green Belt Expansion</option>
                                    </select>
                                </div>
                                <div class="control-group">
                                    <label for="select-target-zone" class="control-label">Target Zone:</label>
                                    <select id="select-target-zone">
                                        <option>Dharampeth (AQI: 145)</option>
                                    </select>
                                </div>
                                <button class="btn-run-simulation">Run Simulation</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Beneficiary Dashboard -->
        <div id="beneficiary-dashboard" class="page dashboard">
            <header class="dashboard-header">
                <div class="header-left">
                    <h1 id="ben-dashboard-title">Air Quality Status</h1>
                </div>
                <div class="header-right">
                    <button id="lang-toggle-ben" class="lang-toggle">
                        <span class="lang-icon">üåê</span>
                        <span id="lang-text-ben">EN</span>
                    </button>
                    <button id="logout-ben" class="btn-secondary">
                        <span id="logout-text-ben">Logout</span>
                    </button>
                </div>
            </header>

            <div class="dashboard-content beneficiary-content">
                <!-- Live AQI Status Card -->
                <div class="card aqi-status-card">
                    <div class="aqi-header">
                        <div class="aqi-live-indicator">
                            <span class="live-dot"></span>
                            <span class="live-text">Live AQI</span>
                        </div>
                    </div>
                    <div class="aqi-main-content" id="ben-status-content">
                        <!-- Populated by JS -->
                    </div>
                </div>

                <!-- Precautionary Measures Card -->
                <div class="card precautions-card">
                    <div class="card-header">
                        <h3 id="ben-precautions-title">‚ö†Ô∏è PRECAUTIONARY MEASURES</h3>
                    </div>
                    <div class="precautions-content" id="ben-precautions">
                        <!-- Populated by JS -->
                    </div>
                </div>

                <!-- What to Expect Today & Health Tips -->
                <div class="dashboard-grid-2col">
                    <div class="card">
                        <div class="card-header">
                            <h3 id="ben-forecast-title">What to Expect Today</h3>
                        </div>
                        <div class="forecast-timeline" id="ben-forecast">
                            <!-- Populated by JS -->
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <h3 id="ben-tips-title">üí° Health Tips for Today</h3>
                        </div>
                        <div class="health-tips" id="ben-health-tips">
                            <!-- Populated by JS -->
                        </div>
                    </div>
                </div>

                <!-- Respiratory Risk Map & Safe Zones -->
                <div class="dashboard-grid-2col">
                    <div class="card">
                        <div class="card-header">
                            <h3 id="ben-map-title">Respiratory Risk Map</h3>
                        </div>
                        <div id="ben-map" class="map-container-simple"></div>
                        <div class="map-legend-simple">
                            <div class="legend-item">
                                <span class="legend-color" style="background: #00E676;"></span>
                                <span id="ben-legend-safe">Safe</span>
                            </div>
                            <div class="legend-item">
                                <span class="legend-color" style="background: #FFD54F;"></span>
                                <span id="ben-legend-careful">Be Careful</span>
                            </div>
                            <div class="legend-item">
                                <span class="legend-color" style="background: #FF6B35;"></span>
                                <span id="ben-legend-avoid">Avoid Outdoor</span>
                            </div>
                            <div class="legend-item">
                                <span class="legend-color" style="background: #E53935;"></span>
                                <span id="ben-legend-highrisk">High Risk</span>
                            </div>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <h3 id="ben-safe-zones-title">üå≥ Safer Areas Near You</h3>
                        </div>
                        <div class="safe-zones-list" id="ben-safe-zones">
                            <!-- Populated by JS -->
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Alert Modal -->
        <div id="alert-modal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 id="modal-title">Zone Details</h3>
                    <button class="modal-close" id="modal-close">&times;</button>
                </div>
                <div class="modal-body" id="modal-body">
                    <!-- Populated by JS -->
                </div>
            </div>
        </div>
    </div>

    <footer class="system-footer">
        <div class="system-tagline" id="system-tagline">Translating air quality into health risk and action.</div>
    </footer>

    <!-- Leaflet JS -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

    <!-- App Scripts -->
    <script src="translations.js"></script>
    <script src="app.js"></script>
</body>

</html>